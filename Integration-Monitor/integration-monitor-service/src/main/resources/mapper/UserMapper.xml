<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zju.integration.monitor.dao.UserDao">
	<resultMap id="UserInfoMap" type="com.zju.integration.monitor.model.User">
		<id column="USER_ID" property="userId" jdbcType="INTEGER" />
		<result column="USER_NAME" property="userName" jdbcType="VARCHAR" />
		<result column="USER_PWD" property="passWord" jdbcType="VARCHAR" />
		<result column="ROLE_CODE" property="roleCode" jdbcType="VARCHAR" />
		<result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP" />
		<result column="CREATOR_ID" property="creatorId" jdbcType="VARCHAR" />
		<result column="VOIDED_BY" property="voidedBy" jdbcType="VARCHAR" />
		<result column="VOIDED_FLAG" property="voidFlag" jdbcType="VARCHAR" />
		<result column="MODIFY_DATE" property="modifyDate" jdbcType="TIMESTAMP" />
	</resultMap>
	
	<sql id="userInfo">
		USER_NAME,USER_PWD,ROLE_CODE,CREATE_DATE,CREATOR_ID,VOIDED_BY,VOIDED_FLAG,MODIFY_DATE
	</sql>
	
	<!--查询用户信息-->
	<select id="getUserInfo" resultMap="UserInfoMap">
		SELECT
		<include refid="userInfo"></include>
		FROM
		USER_INFO
		WHERE USER_ID = #{userId,jdbcType=INTEGER}
	</select>
	<!--写入用户信息-->
	<insert id="insertUserInfo" parameterType="com.zju.integration.monitor.model.User">
	<selectKey resultType="long" order="AFTER" keyProperty="userId">
		SELECT ident_current('USER_INFO') AS userId
	</selectKey>
	INSERT INTO
		USER_INFO (
		<include refid="userInfo"></include>
		 ) VALUES ( 
		#{userName,jdbcType=VARCHAR},
		#{passWord,jdbcType=VARCHAR},
		#{roleCode,jdbcType=VARCHAR},
		#{createDate,jdbcType=TIMESTAMP},
		#{creatorId,jdbcType=VARCHAR},
		#{voidedBy,jdbcType=VARCHAR},
		#{voidFlag,jdbcType=VARCHAR},
		#{modifyDate,jdbcType=TIMESTAMP}
		)
	</insert>
	<!--更新用户信息-->
	<update id="updateUserInfo" parameterType="com.zju.integration.monitor.model.User">
		UPDATE
		USER_INFO
		SET
		USER_NAME=#{userName,jdbcType=VARCHAR},
		USER_PWD=#{passWord,jdbcType=VARCHAR},
		ROLE_CODE=#{roleCode,jdbcType=VARCHAR},
		MODIFY_DATE=getDate() 
		WHERE
		USER_ID
		=
		#{userId,jdbcType=INTEGER}
	</update>
	<!--删除用户信息-->
	<delete id="deleteUserInfo" parameterType="com.zju.integration.monitor.model.User">
		DELETE FROM USER_INFO WHERE USER_ID = #{userId,jdbcType=INTEGER}
	</delete>
	
	<!--根据用户名和密码查询用户信息-->
	<select id="getUserByUserNamePassWord" resultMap="UserInfoMap">
	select * from USER_INFO where USER_NAME=#{userName,jdbcType=VARCHAR} 
	and USER_PWD=#{passWord,jdbcType=VARCHAR}
	</select>
</mapper>