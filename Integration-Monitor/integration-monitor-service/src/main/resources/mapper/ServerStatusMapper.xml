<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zju.integration.monitor.dao.ServerStatusDao">
	<resultMap id="serverStatusMap" type="com.zju.integration.monitor.model.ServerStatusInfo">
		<id column="SERIAL_NO" property="serialNo" jdbcType="INTEGER" />
		<result column="SERVER_CODE" property="serverCode" jdbcType="VARCHAR" />
		<result column="SERVER_NAME" property="serverName" jdbcType="VARCHAR" />
		<result column="SERVER_IP" property="serverIp" jdbcType="VARCHAR" />
		<result column="CPU_UTILIZATION" property="cpuUtilization" jdbcType="INTEGER" />
		<result column="MEMORY_USE" property="memoryUse" jdbcType="INTEGER" />
		<result column="DISK_USE" property="diskUse" jdbcType="INTEGER" />
		<result column="ETHERNET_STATUS" property="ethernetStatus" jdbcType="VARCHAR" />
		<result column="CREATE_DATE_TIME" property="createDate" jdbcType="TIMESTAMP" />
	</resultMap>
	
	<sql id="serverStatusInfo">
		SERVER_CODE,SERVER_NAME,SERVER_IP,CPU_UTILIZATION,MEMORY_USE,DISK_USE,ETHERNET_STATUS,CREATE_DATE_TIME
	</sql>
	
	<!--查询服务器性能参数信息-->
	<select id="select" resultMap="serverStatusMap">
		SELECT
		<include refid="serverStatusInfo"></include>
		FROM
		SERVER_STATUS_INFO
		WHERE SERIAL_NO = #{serialNo,jdbcType=INTEGER}
	</select>
	<!--写入服务器性能参数信息-->
	<insert id="insert" parameterType="com.zju.integration.monitor.model.ServerStatusInfo">
	<selectKey resultType="long" order="AFTER" keyProperty="serialNo">
		SELECT ident_current('SERVER_STATUS_INFO') AS serialNo
	</selectKey>
	INSERT INTO
		SERVER_STATUS_INFO (
		<include refid="serverStatusInfo"></include>
		 ) VALUES ( 
		#{serverCode,jdbcType=VARCHAR},
		#{serverName,jdbcType=VARCHAR},
		#{serverIp,jdbcType=VARCHAR},
		#{cpuUtilization,jdbcType=INTEGER},
		#{memoryUse,jdbcType=INTEGER},
		#{diskUse,jdbcType=INTEGER},
		#{ethernetStatus,jdbcType=VARCHAR},
		#{createDate,jdbcType=TIMESTAMP} 
		)
	</insert>
	<!--更新服务器性能参数信息-->
	<update id="update" parameterType="com.zju.integration.monitor.model.ServerStatusInfo">
		UPDATE 
		SERVER_STATUS_INFO 
		SET 
		SERVER_CODE=#{serverCode,jdbcType=VARCHAR},
		SERVER_NAME=#{serverName,jdbcType=VARCHAR},
		SERVER_IP=#{serverIp,jdbcType=VARCHAR},
		CPU_UTILIZATION=#{cpuUtilization,jdbcType=INTEGER},
		MEMORY_USE=#{memoryUse,jdbcType=INTEGER},
		DISK_USE=#{diskUse,jdbcType=INTEGER},
		ETHERNET_STATUS=#{ethernetStatus,jdbcType=VARCHAR} 
		WHERE 
		SERIAL_NO = #{serialNo,jdbcType=INTEGER} 
	</update>
	<!--删除服务器性能参数信息-->
	<delete id="delete" parameterType="com.zju.integration.monitor.model.ServerStatusInfo">
		DELETE FROM SERVER_STATUS_INFO WHERE SERIAL_NO = #{serialNo,jdbcType=INTEGER}
	</delete>
	
</mapper>